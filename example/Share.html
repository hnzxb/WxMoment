<!DOCTYPE html>
<html>
<head lang="zh-cn">
    <meta charset="UTF-8">
    <title>微信分享</title>
</head>
<body>
<script src="../build.js"></script>
<script>

    var basePath = "http://wximg.gtimg.com/tmt/_demo/wxmoment/";

    //=========微信分享=========

    function successFunc() {
        alert("shared");
    }

    function cancelFunc() {
        alert("canceled");
    }

    function anotherFunc() {
        alert("another");
    }

    var share = new WxMoment.Share({
        'moment': {
            'title': "朋友圈分享链接内容"
        },
        'friend': {
            'title': "昨天下了一场雨",
            'desc': "雨水沾湿了小茉莉"
        },
        'global': {
            'img_url': basePath + "img/thumb.jpg",
            'link': window.location.href.split("?")[0].replace(/([&|\?]{1})ticket=[\w\-]+(&?)/, '$1').replace(/\?$/, '')
        },
        'callback': {
            'success': successFunc,
            'cancel': cancelFunc
        }
    });

    //可以在稍后重新设置
    //这时候设置 global 不再有效,需要单独设置 moment 和 friend
    share.set(['moment', 'title', "没有买卖就没有伤害"]);
    share.set(['moment', 'link', "http://url.cn/"]);
    share.set(['callback', 'success', anotherFunc]);


</script>
</body>
</html>